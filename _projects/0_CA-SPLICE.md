---
title: School and community features that promote low income student success
excerpt:  I investigated the variables of high schools and their local areas which are associated with low income student college eligiblity.
toc: true
header:
  image: /assets/2020-05-17-CA-ed-study/CA_map_school_SPLICE_crop.png
  teaser: /assets/2020-05-17-CA-ed-study/CA_map_school_SPLICE_crop.png
gallery:
  - url: /assets/edstudy/output_52_1.png
    image_path: /assets/edstudy/output_52_1.png
    alt: "Dropout percentage by ethnicity"
  - url: /assets/edstudy/output_60_1.png
    image_path: /assets/edstudy/output_60_1.png
    alt: "Dropout percentage by school median income"
  - url: /assets/edstudy/output_66_1.png
    image_path: /assets/edstudy/output_66_1.png
    alt: "Dropout percentage by school type"
---


*This project was undertaken as a data science project and to complicate interpretation, the fields of data science and machine learning commonly use terms like “prediction”. In this context, “prediction” pertains to machine learning model performance. The Discussion section places the findings on feature importance in the context of education and policy, but even there, my interpretations are stated with reservation. I would welcome feedback from educators, economists, or other social scientists (email ben.lacar AT gmail.com).*

## Executive summary

Low income students face challenges academically which affects long-term employment and upward social mobility. Fortunately, some schools and communities have provided environments for low income students to thrive. In this project, I investigated the features of California (CA) public high schools and their local areas which are associated with whether a school has an exceptionally high percentage of low income students that are college eligible (SPLICE). To obtain school-specific features, I obtained data from GreatSchools websites and from the CA public schools database. This was supplemented with local economic characteristics from publicly available census data. Following data exploration and filtering, I built classification models to predict schools with exceptional SPLICE. Exceptional SPLICE is defined as a school achieving greater than one standard deviation above the mean SPLICE across all CA high schools. A regularized logistic regression model outperformed random forest classification (F1 of 0.67 and 0.55, respectively, for the positive class). I find that schools with exceptional SPLICE are more likely to also have a high proportion of non-low income students that are college eligible, house a smaller student population, and be a charter school. Features of a local community that are tied with exceptional SPLICE include a high percent of workers that use public transportation to commute, and a low percent of workers who work in the agriculture and forestry industry or the retail trade sector. CA schools of exceptional SPLICE are disproportionately located in the Bay Area and in coastal Southern California counties. While care must be emphasized in interpretation, this study may add to the discussion of factors that facilitate low income student success.

## Introduction

My interest in the project stems from my view that education can be a driver of socioeconomic mobility. [One study](https://www.brookings.edu/research/thirteen-economic-facts-about-social-mobility-and-the-role-of-education/) estimates that some college attendance, even without receiving a bachelor’s degree, can provide a return on investment that beats the stock market. However, [another source](https://equitablegrowth.org/working-papers/inequality-of-educational-opportunity-schools-as-mediators-of-the-intergenerational-transmission-of-income/) suggests that education plays only a secondary role for increasing income between generations in some communities, and that local labor markets or marriage patterns are more influential. Therefore, I sought to investigate school and community features where low income students succeed.

In this study, I focused on California high schools for the following reasons. 
1. I can build off of a [different study](https://benslack19.github.io/projects/1_CA-dropout-rates/) where I looked at dropout rates in California high schools.
2. California is home to the largest state population in the United States and contains a diversity of socioeconomic locales. The data would provide a variable set of schools and communities to analyze.
3. I am familiar with the state’s largest metropolitan areas, where most of the state’s population resides. I grew up and [attended high school in San Diego](https://www.greatschools.org/california/chula-vista/6279-Bonita-Vista-Senior-High-School/#Low-income_students*Graduation_rates), I went to [college in Los Angeles](www.ucla.edu), and currently reside in the Bay Area. The geographic domain knowledge helped me check assumptions at various stages of the project.

While I would be interested in understanding academic success at the individual student level, obtaining data for individual students was not practical. However, I could get access from publicly available sources. Some databases were on the level of schools but characteristics of a community came from the census which had granularity at the zip code level. Therefore, I reframed my questions as “What proportion of low income students at a high school are succeeding?” and “What are the factors associated with that community and school that could drive exceptional success?” Therefore, my target is a school’s proportion of low income students that are college eligible (for ease of notation moving forward, I use the acronym SPLICE to refer to this metric). Specifically, my target in binary classification models is whether a school shows exceptional SPLICE, with the threshold for exceptional being one standard deviation above mean SPLICE across all CA high schools as visualized in [this distribution](/assets/2020-05-25-CA-ed-study/SPLICE_target_distribution.png).

To be eligible for University of California (UC) or California State System (CSU) colleges, a high school student must achieve a grade of C or better in two years of history/social science, English (4 years), math (3 years), a laboratory science (2 years), a language other than English (2 years), visual and performing arts (1 year), and a college preparatory elective. This is not an easy bar to clear, regardless of a student’s economic situation.

I obtained as many school and community features as possible, but many were filtered as described in the [Methods](link) section. This project was as much (or more) of an exercise in data science as it was in learning about features of successful low income students in education.

## Methods

*Data collection.* Data was collected with Python packages `urllib`, `BeautifulSoup`, and `xml.tree` from three sources: (1) the [CA Public Schools Database]((link), (2) [GreatSchools](link), and (3) [CA economic characteristics](link) on the zip code level. The CA Public Schools database provided information such as name, district, identification numbers, county, address, and enrollment size. Only active, public high schools from this database were included for analysis. GreatSchools was used to obtain school-specific performance and staff metrics. An API provided by GreatSchools was used to obtain some high-level metrics via an XML tree. Additional metrics, including student-to-counselor ratio, student-to-teacher ratio, average teacher salary, test scores, graduation rates, and our target variable (SPLICE), was obtained by web scraping publicly available sites. California economic characteristics were taken from 2015-16 census data. This includes features of a community at the zip code level including the types of industries, income benefits, health insurance status, employment, worker class, and work commute. 401 schools were in the same zip code as at least one other school. 38 (all in the Los Angeles Unified School District) were co-localized on the same campus as indicated by the street address. After data collection, the dataset contained 1110 schools and 264 features. Details can be found in the [data collection notebook](https://github.com/benslack19/CA-ed-study/blob/master/deliver/BL-1-data-collection.ipynb).

*Data preprocessing and feature selection.* While tree-based models for classification predictions can circumvent restrictions required by linear models, I further filtered the schools and features to improve model robustness and interpretability. Since SPLICE is a metric of college eligibility, I only included schools with a minimum of 25 enrolled seniors, or which at least 10 are low income. Features were eliminated if missing values were present in at least one-third of the schools. Additionally, using the Python package `statsmodels`, I identified and removed features with high variance inflation factor (VIF). High VIF was initially present for many variables if they were a percentage of a category. For example, worker class was represented by multiple features and indicated by a percentage of a community that was private wage, government, self-employed or unpaid. In this case, the percentage of workers in government were dropped since they were highly anti-correlated with the percentage of workers with private wages and thus VIF decreased. Additional correlations were identified by taking the Pearson correlation and/or with scatter plots. Most remaining features had a VIF < 10 and the max VIF was 25.2.

Additional data preprocessing included feature engineering. I estimated the percentage of non-low-income students that are college eligible from a combination of enrollment data and the percentage of low-income students taken from GreatSchools. Furthermore, ethnic composition of a school by the percentage of underrepresented minorities (African American, American Indian or Hispanic, as indicated [here](https://accountability.universityofcalifornia.edu/2015/chapters/chapter-7.html). Further information on data preprocessing and feature selection can be found in [this notebook] (https://github.com/benslack19/CA-ed-study/blob/master/deliver/BL-2a-feature-confirmation.ipynb).

*Data exploration and visualization.* For data exploration, I applied Python packages `matplotlib` and `seaborn` for univariate and bivariate data visualization, and `geopandas` and `fiona` for maps. Geographic reference files came from [geojson.xyz](geojson.xyz) and [Stanford Earthworks](https://earthworks.stanford.edu). In addition to the state of California, I primarily plotted San Diego County, Los Angeles County, and the San Francisco Bay Area since they have the state’s largest populations. Details can be found in the [data visualization notebook](https://github.com/benslack19/CA-ed-study/blob/master/deliver/BL-2b-eda-visualization_b.ipynb).

*Classification models and statistical analysis.* While data exploration was performed on 966 schools, modeling was only performed on schools without missing values, leaving 814 high schools. I applied logistic regression (LR) (`sklearn.linear_model.LogisticRegression`) and random forest (RF) (`sklearn.ensemble.RandomForestClassifier`) to predict exceptional schools for SPLICE. The threshold (66.8%) was defined as one standard deviation above mean for SPLICE across all CA high schools. I applied a 60:20:20 split for train-validation-test. Training-validation employed a 4-fold cross-validation design (`sklearn.model_selection.RandomizedSearchCV`) to determine optimal parameters and hyperparameters. The test set was defined as the hold out set for both models with [F1 score](https://en.wikipedia.org/wiki/F1_score) serving as the primary metric for model evaluation. I applied standardized scaling to the LR model but not in RF since scaling is not necessary. Class weights were run as balanced in both models. LR exhibited a higher F1 for the positive class than RF (see [Results](link)).

The features I focused on for interpretability were based on the absolute value of the LR coefficient and two-sample statistical testing. Since RandomizedSearchCV returned L2 regularization for the logistic regression hyperparameters, [p-values for the coefficients would not apply](https://stats.stackexchange.com/questions/224796/why-are-confidence-intervals-and-p-values-not-reported-as-default-for-penalized). To increase the stringency of features for interpretation, I applied a Mann-Whitney U test with Bonferroni correction to find features that were significantly different between exceptional and non-exceptional schools. I then focused on interpreting features that had a logistic regression coefficient absolute value greater than 0.10 and a corrected p-value from the Mann Whitney U-test of less than 0.05.

## Results

### Data exploration

Visualization of data provides context and assists in model interpretability. Here I assess the geographic representation of schools and the distribution of school and community features before modeling.

#### Geographic representation of schools

The dataset contained schools that reflected the state’s population density. The county with the most schools is Los Angeles with 234, comprising 24.2% of the dataset. Next was San Diego county with 73 schools (7.5% of the data). This was followed by Orange (59 schools), Riverside (52), San Bernardino (52), Sacramento (43), Santa Clara (42), and Alameda (32 schools). Overall, 55 counties in the state were represented with the majority (34) containing fewer than ten schools represented in the data. District representation of schools matched the geographic distribution, with the largest Los Angeles Unified (114 schools) having much more than the second-biggest district San Diego Unified (23). Other large districts included East Side Union High in San Jose (15), San Francisco Unified (13), and Sweetwater Union High in the South Bay of San Diego County (12). However, most districts were very small--204 of the 378 districts were represented by only one school.

![png](/assets/2020-05-25-CA-ed-study/CA_map_school_exceptionalSPLICE.png)

From map inspection and quantitative analysis, a large proportion of exceptional SPLICE schools are located in the San Francisco Bay Area counties (Alameda, Contra Costa, Marin, Napa, San Francisco, San Mateo, Santa Clara, Solano, and Sonoma) or Southern California coastal counties (San Diego, Orange, Los Angeles) compared to the rest of the state. The percentage of schools that are in these two areas represent 54.1% of the entire state. However, 87.0% of schools with exceptional SPLICE are in the nine Bay Area counties or three Southern California coastal counties. (The figures are similar when counting students instead of schools.) This point will be re-visited in the discussion.

#### School features

Enrollment was one metric for filtering (see [Methods](link)). Out of the remaining schools, the total enrollment average is 1547 but the high standard deviation of 897 is an indication of how variable this metric is. The smallest school had 90 students (Round Valley High in Mendocino County) while the largest enrolled 8000 (Opportunities for Learning - Baldwin Park). Interestingly, distribution of total enrollment and the number of enrolled seniors [shows bimodality](/assets/2020-05-25-CA-ed-study/enrollment_E12.png).

With regards to student demographics, the average percentage of under-represented minorities is 60% (SD 27.5%) and the percentage of low-income students was 57% (SD 25.7%) The correlation between these two metrics is highly correlated (Pearson r of 0.86).

Features related to staff included the number of students per teacher (23 +/- 3.9), number of students per counselor (408 +/- 267.5), the percentage of teachers with 3 or more years of experience (87 +/- 12.0) and the percent of teachers who are certified (98 +/- 5.6). The latter two have [left-skewed distributions](/assets/2020-05-25-CA-ed-study/staff_info.png). [Teacher salary](/assets/2020-05-25-CA-ed-study/teacher_salary.png). averaged $76,200 (SD $22,250) and correlated weakly with a community’s local median income (Pearson r of 0.15).

119 schools in the set were designated as a charter school and 99 were magnet; five schools were both magnet and charter.

#### Community features

Census information at the level of zip codes provided insight on an area’s income benefits, industries, health insurance status, employment, worker class, and work commute.

[Local median income](Local_median_income_dist.png) averages $62,520 (SD of $ 24,807) across all communities in the dataset. The distribution shows slightly right skewness demonstrating that few communities in the upper ends of income levels. When looking at a map of income, the variability was striking.

![png](/assets/2020-05-25-CA-ed-study/CA_map_income.png)

I also looked at the predominant industries in a given area, acknowledging that all communities must have a diverse set of occupations. I first determined the average and standard deviation of the percent of workers in each industry category across the dataset. This was followed by calculating the z-statistic for each category and zip code. The industry category with the highest z-statistic for that community was then assigned as representative. Only areas where schools were in the dataset were plotted. (Note that to reduce multicollinearity, the feature associated with percent of workers in the “arts, entertainment, and recreation, and accommodation and food services” was removed prior to model fitting.) 

![png](/assets/2020-05-25-CA-ed-study/Map_main_industry_CA.png)

The exploration and additional details on income benefits, industry, health insurance status, employment, worker class, and work commute features can be found in the [data visualization notebook](https://github.com/benslack19/CA-ed-study/blob/master/deliver/BL-2b-eda-visualization_b.ipynb) and some are discussed below following modeling.

### Model performance for predicting schools with exceptional SPLICE

Given that predicting schools with exceptional SPLICE is a binary classification problem, I employed logistic regression (LR) and random forest (RF) classification. LR models the probability that a school will be exceptional for SPLICE and learns coefficients associated with each feature. A positive coefficient represents the log odds of the school being exceptional by a one-unit increase in the feature, while a negative coefficient indicates that an increase in the feature decreases the association of the school being exceptional. (All features were standardized for comparison). RF uses an ensemble of decision trees. Each tree only uses a subset of predictors, decorrelating the trees making the average of the resulting trees more reliable.

While I assessed multiple evaluation metrics, I optimized for F1 score for both data science and potential decision-making reasons. Schools with exceptional SPLICE are a small class and assessing F1 of the positive class balances the importance of precision (true positive/true positive + false positive) and recall (true positive/true positive + false negative). From a policy or decision-making perspective, it is important in minimizing false positives and false negatives for identification of exceptional schools since the main objective is identifying important school or community features. While both models performed well for predicting schools that would not be exceptional (F1 of 0.95 for both logistic regression and random forest, respectively), logistic regression outperformed random forest on recall and F1 for the positive class when evaluating on the test set. The logistic regression model achieved an [F1 score of 0.67](/assets/2020-05-25-CA-ed-study/Eval_metrics_LR.png) while random forest was [0.55]((/assets/2020-05-25-CA-ed-study/Eval_metrics_LR.png) for predicting exceptional schools.

Due to model performance, I prioritized features identified by [logistic regression coefficients](/assets/2020-05-25-CA-ed-study/LR_feature_coefficients.png). To further increase the stringency of variables for interpretation, I applied two-sample statistical testing (Mann-Whitney U with Bonferroni correction) on the same set of features and identified those that were significantly different between exceptional and non-exceptional schools. In the next section, I discuss the features with logistic regression coefficients greater than 0.10 (by absolute value) and a corrected p-value from the Mann Whitney U-test of less than 0.05 (see Methods). Thirteen features matched this criteria.

![png](/assets/2020-05-25-CA-ed-study/features_highcoef_lowMWpvalue.png)

### School and community features of exceptional SPLICE

#### Schools features associated with exceptional SPLICE

*Student population and test performance.* By far, the top feature with exceptional SPLICE, is the percentage of non-low income students who are college eligible. This feature is positively associated with SPLICE suggesting that academic environments provide benefits across the socioeconomic spectrum of their students. However, a [gap between non-low income students and low income students within a school for college eligibility](/assets/2020-05-25-CA-ed-study/nonLI_vs_LI_gap.png) is still prevalent within a school. A [school’s percentage of low-income students (regardless of college eligibility) was not correlated with SPLICE](/assets/2020-05-25-CA-ed-study/pct_LI_vs_SPLICE.png), but it was positively associated in predicting schools with exceptional SPLICE. In addition, while the percent of low income students that have tested for both English proficiency and math proficiency were positively associated with exceptional SPLICE, the English test scores had a higher coefficient, suggesting that it is more predictive of the target.

*School size.* Interestingly, smaller schools, but not necessarily smaller class sizes, are common in schools of exceptional SPLICE. Features indicative of overall school size, such as number of enrolled 12th graders (E12) , enrollment, and student-per-counselor ratio were negatively associated with exceptional SPLICE. However, the ratio of student-per-teacher did not necessarily need to be small and, in fact, shows a small positive correlation with schools that performed highly for SPLICE.

*Charter/magnet status.* A charter school positively associated with exceptional SPLICE. (This feature was also the second-most significant feature by the Mann-Whitney test). Magnet school status was not predictive of exceptional SPLICE.

*Staff features.* An unexpected finding with regards to staff features is that schools with exceptional SPLICE tended to have a lower percentage of teachers who are certified, especially since this metric is [heavily left-skewed](/assets/2020-05-25-CA-ed-study/staff_info.png). Non-significant features to the model also included the percent of teachers who have 3 or more years of experience and average teacher salary, suggesting that schools with exceptional SPLICE do not necessarily have the most experienced and best paid teachers.

#### Community features of a school associated with exceptional SPLICE

As emphasized in the methods section, economic characteristics of a school’s community is taken from census data. This data was obtained at the zip code level and not directly from the associated school population. This means that students and their families may live in one zip code and attend schools or work in another zip code. With these caveats noted, the assumption here is that the features are largely reflective of the community. One observation from the analysis is that schools with exceptional SPLICE are in an area where many commuting workers took public transportation instead of driving alone. Exceptional SPLICE schools were negatively associated with communities where the predominant industry involved agriculture, forestry, fishing and hunting, and mining or retail trade. This is reflective of the [locations of schools with exceptional SPLICE](/assets/2020-05-25-CA-ed-study/CA_map_school_exceptionalSPLICE.png) and an [area’s predominant industry](/assets/2020-05-25-CA-ed-study/Map_main_industry_CA.png).

#### Features that had low predictive value or statistical significance in MW test
Most features related to income benefits (local median income, percent of community receiving supplemental security income, etc.) were not predictive, but a percent of a community receiving social security benefits had a significant MW p-value and logistic regression coefficient of -0.094 (just under the 0.10 absolute value threshold). Most features related to health insurance coverage (percent of community with public health insurance coverage and percent of children without health insurance coverage) were not predictive or significantly different. Interestingly, for the percentage of a community with health insurance, the MW test shows no statistical significance between the negative and positive classes for exceptional SPLICE but the logistic regression coefficient was -0.30. Magnet schools were not positively or negatively associated with exceptional SPLICE. Ethnic composition of a school, represented as the percent of under-represented minorities, had a LR coefficient of 0.239 but was not significant by MW.


## Discussion

I initiated this project because I wondered, “Where are places where low income students are succeeding exceptionally? What do those communities look like?” Focusing on my home state of California, I gained some answers. But I only see this as a starting point of a discussion. It is natural to ask whether some of these findings can be called “causes.” But without context, this is a dangerous exercise. It is easy to misconstrue some of these findings, hence the pre-emptive [cautionary note](link) at the start of the post. 

Before we can think about the implications of the results, l emphasize that the models I used to predict schools of exceptional SPLICE did not show great performance. One immediate explanation is that not every feature of a school or community is captured here. (This would be very difficult to do even if that was the aim.) And for those variables that are in the model, most are insignificant or contribute only a small amount to the prediction.

Acknowledging the study imperfections, for what results can we consider implications or generate new questions *with proper context*? One finding is that schools that are in a community where a high proportion of [workers commute](/assets/2020-05-25-CA-ed-study/Map_main_workcommute_CA.png) by public transportation is positively associated with exceptional SPLICE. Perhaps public transportation may ease the burden on workers to drive their kids to school. This idea has been voiced in some [proposals](https://www.dvp-praxis.org/addressing-transportation-barriers-is-needed-to-improve-college-access-and-success/), at least with respect to facilitating student access to colleges. The importance of alternatives to driving to schools makes sense in areas of high population density. But does this mean we should encourage more Shasta County employees to start taking the bus? Of course not. Additionally, the percent of a community’s workers in the industry of agriculture, forestry, fishing and hunting, and mining or retail trade was negatively associated with exceptional SPLICE but for educational services, healthcare and social assistance, there was a positive correlation. Am I proposing that a farmer in Fresno become a teacher? No. But I think we can look into why exceptional SPLICE schools are less prevalent outside the Bay Area and Southern CA coastal counties. I am certainly curious about this.

Another important feature that can use additional examination is charter school status. Charter schools are publicly funded, independently run alternatives to traditional public schools. It is not within the scope of this study to understand what characteristics of charter schools contribute to the prediction of exceptional SPLICE. Other sources have suggested that the fact that charters have more autonomy in tailoring curricula to students can contribute to their performance, especially within urban settings (see [here](https://www.heritage.org/education/commentary/how-charter-schools-empower-inner-city-children-escape-failing-public-schools) and [here](https://onlinedegrees.sandiego.edu/are-charter-schools-better-in-creating-education-equity/). However, charter schools are not without controversy. Like all schools, they can[vary in quality](https://www.gse.harvard.edu/news/ed/17/05/battle-over-charter-schools). They also may compete with traditional public school resources, even sharing the [same campus](https://www.latimes.com/local/education/la-me-edu-schools-compete-to-survive-20180925-story.html). (As noted in the Methods, 38 schools in the Los Angeles Unified School District share an address with another school). Charter schools have certainly demonstrated success in terms of SPLICE, but evaluating together with GreatSchools ratings show a [more nuanced picture](/assets/2020-05-25-CA-ed-study/gsRating_vs_SPLICE_chartercode.png).

Other features identified as important for a school with exceptional SPLICE line up with other work or even our intuition. For example, the highest coefficient in the model was associated with the college eligibility rates of less disadvantaged students. This is to not ignore the gap between non-low income and low income students in overall college eligibility rate, but this indicates that academic environments that influence the performance of one group generally applies to the other group. In addition, exceptional SPLICE is associated with smaller schools. Even though student-to-teacher ratio was not an important feature in the prediction, it is reasonable to assume that a student (regardless of income level) has more support when there are fewer students overall. Another point of discussion are features that were not predictive, such as local median income. I would have guessed that wealthier areas would have the resources to support a low income student: [teachers are slightly better paid](/assets/2020-05-25-CA-ed-study/teacher_salary.png) and a low income student could get more attention since [areas of higher income have a lower percentage of students that are low income](/assets/2020-05-25-CA-ed-study/local_median_income_vs_pctLI_pctURM.png). The analysis here does not necessarily support that hypothesis.

No matter the findings reported here, we can certainly say that the factors that contribute to exceptional SPLICE are, well, complicated. Additional questions that one could ask are: What are students’ home lives like? Is there a selection process just for enrollment? What kind of tutoring services are available to students outside of school? What kind of access do they have to the internet and technology? What is the variability in teacher quality?

The questions of what it takes to support a high population of low income students to succeed academically cannot be fully addressed here. As I have emphasized, the data should be discussed in collaboration with others, especially teachers. A New York Times article appeared recently that asked educators [Do children’s zip codes at birth determine their futures?](https://www.nytimes.com/interactive/2020/05/14/opinion/inequality-schools-teachers.html?action=click&module=Opinion&pgtype=Homepage). Some teachers’ ideas are similar to what this project has found. Some are different or new. But all voice concern about the challenges of poverty. As if low-income students do not deal with enough challenges, Covid-19 has prompted some [efforts to re-route funding *away* from low-income districts](https://www.npr.org/sections/coronavirus-live-updates/2020/05/21/860352150/devos-faces-pushback-over-plan-to-reroute-aid-to-private-school-students). 

Continuing to probe what factors would help low income students succeed and implementing those that are actionable can help address an important societal problem.

## Acknowledgements
I thank the Insight SV 20.A cohort for feedback, code sharing, and support as I finished this project.

The [project repository](https://github.com/benslack19/CA-ed-study) contains Jupyter notebooks and additional figures. This article was first posted on this blog on May 25, 2020. It will be updated as I receive feedback. I can be reached at ben.lacar AT gmail.com